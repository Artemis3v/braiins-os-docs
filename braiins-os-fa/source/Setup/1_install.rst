##################
نصب و راه اندازی
##################

.. contents::
	:local:
	:depth: 1

***************
شروع به کار
***************

این مستندات یک راهنما برای شروع سریع نصب Braiins OS بر روی دستگاه ماینر شماست. برای تست و استفاده Braiins OS دو راه وجود دارد:

  ۱. **روش بوت از حافظه SD کارت** با ایمج Braiins OS, در این روش فریم‌ور اصلی موجود در دستگاه روی حافظه داخلی دستگاه باقی میماند. در صورت مواجهه با هر مشکلی، میتوانید به راحتی فریم‌ور موجود در دستگاه را از حافظه داخلی بوت کنید. این یک روش امن است که برای شروع پیشنهاد میشود.

  ۲. **روش بازنویسی دائمی فریم‌ور موجود**، Braiins OS به طور موثری کاملا جایگزین فیرم‌ ویر نصب شده توسط کارخانه میشود. در این روش، تنها راه برای بازگشت به راه اندازی پیش فرض، بازگردانی فریم‌ور نصب شده توسط کارخانه از یک نسخه بک آپ است که شما هنگام نصب ایجاد کرده اید و یا بازسازی فریم‌ور کارخانه است.

به خاطر دلایلی که ذکر شد، بسیار توصیه میشود که Braiins OS **فقط روی دستگاههایی که دارای شکاف SD card** هستند نصب شود.

برای شروع ماینینگ با استفاده از Braiins OS  و BOSminer شما نیاز دارید که :

 * دارای یک دستگاه ماینر پشتیبانی کننده از ASIC باشید
 * آخرین نسخه Braiins OS را دریافت کنید
 * Braiins OS را نصب کنید
 * تنظیمات Braiins OS را انجام دهید و شروع به ماینینگ کنید.

*توجه: دستورات این مستندات جنبه و هدف راهنمایی دارد. شما ممکن است نیاز داشته باشید که مسیر فایلها و نام ها را به شکلی مناسب تنظیم کنید.*

********************
راهنمای نصب / ارتقاء
********************

برای انتخاب بهتر در بین مسیرهای مختلف نصب / ارتقاء، از راهنمای زیر استفاده کنید:

 * **Stock -> Braiins OS+ (آخرین نسخه)** - راهنمای مرتبط را در این بخش‌ها دنبال کنید :ref:`sd_card_method` یا :ref:`remote_ssh_method`
 * **Braiins OS (نسخه‌های قدیمی) -> Braiins OS+ (آخرین نسخه)** - راهنمای ارتقاء را در این بخش دنبال کنید :ref:`upgrade_community_bos_plus`
 * **Braiins OS (نسخه‌های قدیمی) -> Braiins OS Community Edition (آخرین نسخه)** راهنمای ارتقاء را در این بخش دنبال کنید :ref:`downgrade_bos_plus_community`
 * **Braiins OS Community Edition (نسخه‌های قدیمی) -> Braiins OS+ (آخرین نسخه)** راهنمای ارتقاء را در این بخش دنبال کنید :ref:`upgrade_community_bos_plus`
 * **Braiins OS+ (نسخه‌های قدیمی) -> Braiins OS Community Edition (آخرین نسخه)** راهنمای ارتقاء را در این بخش دنبال کنید :ref:`downgrade_bos_plus_community`
 * **Braiins OS+ -> Stock** - راهنمای بازگردانی را در این بخش دنبال کنید :ref:`downgrade_bos_stock`

.. _sd_card_method:

******************
روش کارت حافظه ‌‌SD
******************

 * آخرین نسخه از ایمیج فریم‌ور قابل نصب را از وبسایت دانلود کنید: `website <https://braiins-os.com/>`_.
   شما میتوانید امضای دیجیتالی فایل را از طریق کلید عمومی موجود `در اینجا تایید کنید. <https://slushpool.com/media/download/braiins-os.gpg.pub>`_
 * ایمیج دانلود شده را روی یک کارت حافظه SD بازنویسی کنید. (برای نمونه: نرم‌افزار `Etcher <https://etcher.io/>`_).
 * جامپر ها را برای بوت کردن از کارت حافظه SD تنظیم کنید( به جای حافظه NAND) همانطور که در پایین نشان داده میشود.

	.. |pic1| image:: ./s9-jumpers.png
	    :width: 45%
	    :alt: S9 Jumpers

	.. |pic2| image:: ./s9-jumpers-board.png
	    :width: 45%
	    :alt: S9 Jumpers Board

	|pic1|  |pic2|

 * کارت حافظه SD را وارد دستگاه کنید، سپس دستگاه را به کار بیندازید.
 * پس از چند لحظه، شما باید بتوانید از طریق آی پی دستگاه به رابط کاربری Braiins OS دسترسی پیدا کنید.

**استفاده از یک کارت حافظه SD برای چند دستگاه**

آخرین آدرس مک استفاده شده بر روی کارت حافظه SD ذخیره میشود برای اینکه چک‌ شود که ایا SD بر روی همان دستگاه نصب شده است. اگر آدرس فعلی مک با قبلی فرق کند، شبکه  و تنظیمات سیستم به حالت پیش فرض و اولیه ریست میشود و ``/etc/miner_hwid`` پاک میشود.

HW_ID is determined from NAND if it stores Braiins OS firmware. If NAND is corrupted
or it contains stock firmware, then the file ``/etc/miner_hwid`` is used
if it exists, otherwise a new HW_ID is generated and stored to
``/etc/miner_hwid`` to preserve HW_ID until the next boot.

Braiins OS را از کارت حافظه SD به حافظه داخلی دستگاه فلش کنید. (NAND)
======================================================================

همچنین میتوانید Braiins OS را روی حافظه داخلی دستگاه همزمان با اینکه فریم‌ور را روی کارت حافظه SD اجرا میکنید، نصب کنید(NAND).
Braiins OS را به طور دائمی روی NAND فلش کنید، از طریق SSH به ماینر وصل شوید و دستور زیر را اجرا کنید:

::

  miner nand_install

.. _remote_ssh_method:

*******************
روش نصب (SSH) ریموت
*******************

نصب Braiins OS با استفاده از *روش ‌SSH*  مراحل زیر را شامل میشود:

 * *(فریم‌ور شخصی سازی شده) فریم‌ور موجود را فلش کنید. (اگر دستگاه شما بر روی فریم‌ور اصلی یا یکی از نسخه های قبلی Braiins OS کار میکند، میتوانید این مرحله را رد کنید).
 * *(فقط برای ویندوز)* نرم افزار *Ubuntu for Windows 10* را از فروشگاه مایکروسافت نصب کنید. `لینک دریافت <https://www.microsoft.com/en-us/store/p/ubuntu/9nblggh4msv6>`_
 * دستورات زیر را در ترمینال خط فرمان وارد کنید (متغییر ``IP_ADDRESS`` را جایگزین کنید) :

*(توجه داشته باشید که دستورات با اوبونتو و اوبونتو برای ویندوز ۱۰ سازگار است. اگر شما از توزیع منفاوتی از لینوکس یا سیستم عامل دیگری استفاده میکنید، لطفا مستندات مربوطه را چک ‌کنید و دستورات را در صورت نیاز ویرایش کنید.)*

::

  # شرایط را آماده کرده و فریم‌ور را دانلود کنید.( اگر این کار را قبلا انجام داده اید میتوانید این مرحله را رد کنید)
  sudo apt update && sudo apt install python3 python3-virtualenv virtualenv
  wget -c https://feeds.braiins-os.org/20.03/braiins-os_am1-s9_ssh_2019-02-21-0-572dd48c_2020-03-29-0-6ec1a631.tar.gz -O - | tar -xz && cd ./braiins-os_am1-s9_ssh_2019-02-21-0-572dd48c_2020-03-29-0-6ec1a631
  virtualenv --python=/usr/bin/python3 .env && source .env/bin/activate && python3 -m pip install -r requirements.txt && deactivate
  
  # Braiins OS را روی دستگاه نصب کنید.
  cd ~/braiins-os_am1-s9_ssh_2019-02-21-0-572dd48c_2020-03-29-0-6ec1a631 && source .env/bin/activate
  python3 upgrade2bos.py IP_ADDRESS

*************************************
نصب / ارتقاء چندین دستگاه
*************************************

در صورتی که نیاز به نصب یا به روز رسانی چند دستگاه داشتید، میتوانید از فایل تنظیمات ما استفاده کنید که دستورات برای استفاده های مختلف را تولید میکند.

برای دسترسی به فایل آماده‌ساز دستورات `اینجا کلیک کنید <https://docs.google.com/spreadsheets/d/1H3Zn1zSm6-6atWTzcU0aO63zvFzANgc8mcOFtRaw42E>`_
