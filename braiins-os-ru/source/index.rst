.. toctree::
   :hidden:
   :maxdepth: 3
   :caption: Table of Contents:
   :glob:

   self
   Setup/index*
   Configuration/index*
   Basic User's Guide/index*
   Development/index*

---------------

########
Введение
########

.. note::

Braiins OS - это полностью открытая операционная система для майнеров ASIC. Это была первая прошивка с реализацией оверт AsicBoost в 2018 году, и теперь в ней реализован новый протокол майнинга Stratum V2.
Кроме того, Braiins OS работает в тандеме с нашим новым программным компонентом BOSminer, который мы написали.
с нуля на языке Rust в качестве замены устаревшего CGminer.

В настоящее время поддерживаются устройства Antminer S9, s9i, S9j, S17 и S17 Pro от Bitmain. Поддержка Antminer S17+, T17 и T17+ запланирована на ближайшее время.

**************
Характеристики
**************

 * Операционная система с открытым исходным кодом
 * Имплементация Stratum V2 с улучшенной эффективностью переноса данных и предотвращением перехвата хэшрейта
 * Замена CGminer (BOSminer) написана с нуля на языке Rust
 * Быстрый запуск (5-7 секунд)
 * NНикаких случайных сбоев из-за неопределенного поведения
 * Массовая установка
 * Автоматические обновления со стандартной системой opkg
 * Полностью настраиваемое управление вентилятором (поддержка иммерсионного охлаждения)
 * Расширенный мониторинг для предотвращения перегрева и других проблем

**************************
Служба поддержки и контакт
**************************

Есть вопросы?
Наша команда разработчиков и поддержки всегда готовы помочь.

Присоединяйтесь к нашим группам в Telegram:

  * `EN группа <https://t.me/BraiinsOS>`_
  * `RU группа <https://t.me/BraiinsOS_RU>`_
  * `ZH группа <https://t.me/BraiinsOS_ZH>`_
  
  Вы также можете `отправить VIP-запрос <https://slushpool.kayako.com/en-us/conversation/new/11>`_ в нашу службу поддержки.

****************
Журнал изменений
****************

20.09
---------------------------

Этот выпуск обеспечивает поддержку Antminer S17 и S17 Pro, а также включает отладочный выпуск для всех Antminer S9.

*Все типы оборудования для майнинга

  * [функция] температура микросхемы приблизительно равна температуре платы при неисправном датчике температуры
  * [функция] интегрированная DNSmasq локального кеша DNS для уменьшения количества запросов к доменным именам
  * [буг] исправлена проблема с фиксированным соотношением долей и квотой, когда хешрейт не распределялся правильно
  * [функция] мы улучшили алгоритм отсрочки для нестабильных пулов, где пул считается стабильным, только если он работает без ошибок в течение одного часа

* Antminer S17

  * [примечание] Braiins OS для Antminer S17 не различает "классическую" версию S17 и версию Pro, поскольку оба типа оборудования практически идентичны.

20.06
---------------------------

Этот выпуск направлен на улучшение удобства и простоты использования Braiins OS+ и BOS+ Toolbox путем внедрения новых функций и устранения наиболее важных проблем.

  * Все типы оборудования для майнинга

    * [обходное решение] Поддержка пулов на основе yiimp (например, prohashing), которые неправильно отправляют скользящую маску версии, начинающуюся с '0x', которая не соответствует спецификации BIP-310
    * [функция] Поддержка stratum V1, так как он используются некоторыми пулами для переключения алгоритмов и других хаков
    * [функция] Реализация механизма автообновления. Машинка будет периодически проверять наличие новой версии Braiins OS и обновляться до нее автоматически при обнаружении. Эта функция включена по умолчанию при переключении со стоковой прошивки, но ее необходимо включить вручную при обновлении со старой версии Braiins OS.
    * [функция] Улучшено ведение журнала системы с помощью logrotate. Системные журналы теперь автоматически сжимаются и сохраняются в NAND устройства, что позволяет хранить более длинные журналы
    * [функция] Обновлен BOS Toolbox, который теперь может запускать пользовательские команды в пакетном режиме
    * [буг] Установка NAND с SD-карты теперь корректно переносит конфигурацию с SD-карты, а не из старой системы на NAND
    * [буг] Исправлена проблема с пустым *bosminer.toml*, когда майнер выключен до того, как система очистит буфер
    * [буг] Кнопка отчета IP теперь работает правильно.

  * Antminer S9

    * [функция] Мы вернулись к IP-ядру Xilinx I2C для связи с контроллерами напряжения и расширили его фильтрацией помех для шумной среды.
    * [функция] Линия UART Rx для связи с чипами хэширования была расширена с помощью глит-фильтрации

20.04
---------------------------

Этот выпуск охватывает в основном проблемы, с которыми сталкиваются пользователи, трудности установки/удаления и 1 серьезную проблему с контроллером I2C на S9. Кроме того, теперь у нас есть ночные сборки, которые легко включить с помощью **bos** tool.

  * Все типы оборудования для майнинга

    * [функция] поддержка переподключения - мы реализовали поддержку `client.reconnect` (stratum V1) и переподключение сообщения для V2
    * [функция] установка/удаление (иначе **upgrade2bos** или **restore2factory**) улучшен процесс (переход с заводской прошивки на Braiins OS или наоборот):
    * [функция] собственный пользователь пула (`--pool-user`) может быть установлен в командной строке
    * [функция] настройки пула из заводской прошивки теперь автоматически переносятся в конфигурацию BOSminer. Миграцию можно отключить, указав (`--no-keep-pools`)
    * [функция] Теперь мы предоставляем двоичную форму **upgrade2bos** (основанный на pyinstaller) содержит последний установочный образ Braiins OS
    * [функция] аналогично, **restore2factory** (основанный на pyinstaller) теперь доступен в двоичной форме и больше не требует загрузки/поиска правильной заводской прошивки.
   * [функция] Дисковое пространство и длительное резервное копирование оригинальной прошивки теперь отключено по умолчанию (может быть включено `--backup`)
    * [функция] сохранение имени хоста при первоначальной установке теперь осуществляется двумя способами `--keep-hostname` и `--no-keep-hostname`, позволяя принудительно переопределить и автоматически генерировать имя хоста на основе MAC-адреса
    * [функция] поддержка включения / отключения ночных сборок была интегрирована в **bos** utility (и ее последователя **miner**).
    * [функция] система теперь обеспечивает **logs** покрытие **longer timespan** **BOSminer** операции благодаря включению **log rotation** и сжатия '/var/log/syslog.old', если больше чем 32 KiB
     * [буг] изображение на SD-карте теперь содержит открытый ключ авторизации в пуле, который отсутствовал
    * [буг] процент отказов теперь корректно отображается
    * [буг] неизвестные сообщения stratum  V1, полученные от сервера, теперь регистрируются для диагностики

   * Antminer S9
  
    * [буг] некоторые устройства испытывали случайные блокировки контроллера I2C и не могли обмениваться данными с контроллерами питания хэш-панели, подключенными к общей I2C. Мы обнаружили, что причиной было ядро контроллера Xilinx I2C, которое мы интегрировали в поток битов FPGA . Мы переключились на I2C, присутствующий в SoC, и поток битов только направляет сигнал периферийного устройства (IIC0) на соответствующие выводы FPGA.

20.03
---------------------------

Смотри WHATSNEW.MD (Будет опубликовано 3/31 на github)

****************
Известные ошибки
****************

Ниже перечислены проблемы, которые, как известно, присутствуют в выпущенной версии.

20.03 (обновлено 30.03.2020)
----------------------------

* GUI

    * Ссылочная линия на графике хэшрейта имеет неверное значение для среднего номинального хэшрейта. Ошибка
      присутствует только тогда, когда работают менее 3 цепочек хешей.
    * Коэффициент отклонения умножается на 100. Например, когда коэффициент отклонения составляет 0,1%, тогда отображается
      10%.

   * Конфигурация

     * При установке SD-карты появится сообщение об отсутствии ключа аутентификации Stratum V2 в Miner/Configuration.
       раздел (Error: missing upstream authority key for securing stratum2+tcp connection in pool).
       Пользователь может настроить соединение (включая ключ) в конфигурации или непосредственно в
       файл ``/etc/bosminer.toml``.
