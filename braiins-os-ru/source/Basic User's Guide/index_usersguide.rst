#################################
Базовое руководство пользователя
#################################

.. contents::
	:local:
	:depth: 2

**************
Веб-статистика
**************

Статистика, отображаемая на главной странице веб-интерфейса, их описание находится ниже.

Хэш-цепочки
===========

* **ID**                    - ID хэш-цепочки, соответствует маркировке на плате управления
* **REAL HASH RATE**        - Фактический хешрейт в хеш-цепочке
* **NOMINAL HASH RATE**     - Теоретическая хешрейт хеш-цепочки, основанный на частоте чипов 
* **VOLTAGE**               - Напряжение, используемое в хеш-цепочке
* **FREQUENCY**             - Частота чипов (средняя)
* **BOARD TEMP**            - Температура, сообщаемая датчиками на хэш-плате
* **CHIP TEMP**             - Температура сообщаемая датчиками на чипе
* **ASIC#**                 - Количество функционирующих ASIC-чипов 
* **CORE#**                 - Сводка активных ядер на всех функционирующих чипах
* **HARDWARE ERRORS**       - Количество аппаратных сбоев - неправильная работа из-за просчета оборудования
* **HW ERROR HASH RATE**    - "Потери" хешрейта из-за ошибок HW; сумма  HW Error Hash Rate и Real Hash Rate  должна равняться Nominal Hash Rate


Пулы
====

* **ID**                    - Порядок пулов, указанный пользователем
* **URL**                   - URL-адрес майнинга
* **USER**                  - Имя пользователя и Имя воркера, указанные пользователем
* **STATUS**                - Статус пула - "Alive" когда пул доступен, "Dead" когда пул не доступен на этом URL-адресе
* **ACTIVE**                - Статус Active: "Yes" – работа отправляется на пул; "No" – пул не используется
* **ACCEPTED**              - Количество отправленных шеров, которые были приняты пулом
* **REJECTED**              - Количество отправленных шеров, которые были отвергнуты пулом
* **STALE**                 - Количество отправленных шеров, которые более не действительны
* **LAST DIFFICULTY**       - Сложность последнего шера
* **GENERATED WORK**        - Количество сгенерированной работы для чипов
* **ASICBOOST**             - AsicBoost статус - "Yes" включен, "No" выключен

Сводка
======

   * **HASH RATE 1M**          - Средний хешрейт за последнюю 1 минуту
   * **HASH RATE 15M**         - Средний хешрейт за последних 15 минут
   * **HASH RATE 24H**         - Средний хешрейт за последних 24 часа
   * **FOUND BLOCKS**          - Количество найденных блоков
   * **ACCEPTED**              - Количество отправленных шеров, которые были приняты пулом
   * **DIFFICULTY ACCEPTED**   - Сложность последнего принятого шера
   * **REJECTED**              - Количество отправленных шеров, которые отвергнуты пулом
   * **DIFFICULTY REJECTED**   - Сложность последнего отвергнутого шера
   * **REJECTION RATIO**       - Соотношение отвергнутых шеров и общего количества шеров (включая отвергнутые)
   * **ELAPSED TIME**          - Время, которое прошло с момента запуска BOSminer
   * **HARDWARE ERRORS**       - Количество аппаратных сбоев - отказ от работы из-за аппаратного просчета
   * **SHARES/1M**             - Среднее количество шеров, принятых за минуту

Мониторинг вентиляторов
=======================

   * **ID**                    - Порядок вентиляторов
   * **SPEED**                 - Скорость вентилятора (% RPM)
   * **RPM**                   - Обороты вентилятора в минуту

**************************
Сигнализация майнера (LED)
**************************

Светодиодная сигнализация майнера зависит от его режима работы. Есть два режима (*восстановление* и *нормальный*) которые сигнализируются **зеленым** и **красным цветом светодиода** на передней панели. Светодиод на плате управления (внутри) всегда работает в режиме *сердцебиение* (то есть мигает со средней скоростью нагрузки).

Режим восстановления
====================

Режим восстановления сигнализируется **мигающим зеленым светодиодом** (50 мс вкл, 950 мс выкл) на передней панели. **Красный светодиод** обозначает доступ к диску NAND и мигает во время сброса к заводским настройкам при записи данных в NAND.

Нормальный режим
================

Состояние нормального режима сигнализируется комбинацией светодиодов на передней панели **красного цвета** и **зеленого цвета**, как указано в таблице ниже:

+--------------------+---------------------------+--------------------+
| Красный светодиод  | Зеленый светодиод         | Значение           |
+====================+===========================+====================+
| включен            | выключен                  | *bosminer* или     |
|                    |                           | *bosminer_monitor* |
|                    |                           | не работают        |
+--------------------+---------------------------+--------------------+
| медленно мигает    | выключен                  | хешрейт на 80%     |
|                    |                           | ниже чем ожидаемый |
|                    |                           | хешрейт или майнер |
|                    |                           | не может           |
|                    |                           | подключится к      |
|                    |                           | пулу (все пулы     |
|                    |                           | недоступны - dead) |   
+--------------------+---------------------------+--------------------+
| выключен           | очень медленно мигает     | *майнер*           |
|                    | (секунду включен,         | рабочий и хешрейт  |
|                    | (секунду выключен)        | превышает 80%      |
|                    |                           | от ожидаемого      |
|                    |                           | хешрейта           |                     
+--------------------+---------------------------+--------------------+
| часто мигает       | N/A                       | переопределение    |
|                    |                           | светодиодов        |
|                    |                           | запрошенное        |
|                    |                           | пользователем      |                                                                 
|                    |                           | (``miner fault_lig |
|                    |                           | ht on``)           |
+--------------------+---------------------------+--------------------+

*********************
Идентификация майнера
*********************

Мигание светодиода
==================

Утилита локального майнера также может быть использована для идентификации конкретного устройства включив активное мигание **красного всетодиода**:

.. code:: bash

   miner fault_light on

Аналогично отключить запуск светодиодов:

.. code:: bash

   miner fault_light off

Discover Script
===============

Скрипт *discover.py* используется для обнаружения поддерживаемых майнинговых устройств в локальной сети и имеет два режима работы.
Сначала клонируйте репозиторий и подготовьте среду с помощью следующих команд:

.. code:: bash

    # clone repository
    git clone https://github.com/braiins/braiins-os.git
    
    cd braiins-os/braiins-os/
    virtualenv --python=/usr/bin/python3 .env
    source .env/bin/activate
    python3 -m pip install -r requirements.txt

Режим прослушивания (Listen mode)
---------------------------------

В этом режиме IP и MAC-адреса устройства отображаются после нажатия кнопки IP Report. Параметр ``--format`` может использоваться для изменения стандартного форматирования информации IP / MAC.

.. code:: bash

   python3 discover.py listen --format "{IP} ({MAC})"

   10.33.10.191 (a0:b0:45:02:f5:35)

Режим сканирования (Scan mode)
------------------------------

В этом режиме скрипт сканирует указанный диапазон сети на поддерживаемые устройства. Ожидается, что этот параметр будет включать в себя список IP-адресов или IP-подсеть с маской (пример ниже) для сканирования всей подсети.

Для каждого устройства выходные данные включают MAC-адрес, IP-адрес, системную информацию, имя хоста и имя пользователя для майнинга.

.. code:: bash

   python3 discover.py scan 10.55.0.0/24

   00:7e:92:77:a0:ca (10.55.0.133) | bOS am1-s9_2018-11-27-0-c34516b0 [nand] {1015120 KiB RAM} dhcp(miner-w3) @userName.worker3
   00:94:cb:12:a0:ce (10.55.0.145) | Antminer S9 Fri Nov 17 17:57:49 CST 2017 (S9_V2.55) {1015424 KiB RAM} dhcp(antMiner) @userName.worker5

*****************************************************
Вход / Выход из режима восстановления (Recovery Mode)
*****************************************************

Обычно пользователям нет необходимости переходить в режим восстановления при использовании Braiins OS стандартным способом. Процесс восстановления ``restore2factory.py`` использует этот режим для восстановления оригинальной заводской прошивки от производителя. Это также может быть полезно при ремонте/исследовании установленной в данный момент системы. 

Режим восстановления может быть активирован различными способами:

   *IP SET кнопка* - держите в течении *3s* пока зеленый светодиод не начнет мигать
   *SD карта* - Первый раздел с FAT содержит файл *uEnv.txt* со строкой  **recovery=yes**
   *miner utility* - вызовите ``miner run_recovery`` из командной строки майнера

Из режима восстановления можно выйти, перезагрузив устройство. Если устройство после перезагрузки снова находится в режиме восстановления, присутствуют проблемы с установкой/настройкой устройства.
