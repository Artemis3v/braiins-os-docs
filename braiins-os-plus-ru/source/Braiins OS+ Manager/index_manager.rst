
.. _manager:

###################
Braiins OS+ Manager
###################

.. contents::
  :local:
  :depth: 1

Braiins OS+ Manager - это cloud платформа, которая позволяет удаленно настраивать устройства для майнинга с прошивкой Braiins OS+, а также постоянно получать данные об их производительности.

Данные отправляются по протоколу Stratum V2 и с использованием того же канала, который используется для сбора платы за разработку (devfee), таким образом, не обременяя вашу сеть другим подключением.

Основным объектом Braiins OS+ Manager является группа устройств под названием Farm (ферма). У каждой фермы есть свой идентификатор - Farm ID. Это строка, которую вы должны прописать на своих устройствах Braiins OS+, если вы хотите подключить их к ферме. После подключения устройства каждые 120 секунд отправляют данные о своей производительности в Braiins OS+ Manager.

У каждой фермы есть своя конфигурация. Когда вы обновляете и сохраняете новую конфигурацию, она будет перенесена на устройство после того, как Manager получит полезные данные о производительности от устройства. Поскольку одна и та же конфигурация применяется ко всем устройствам в ферме, **мы настоятельно рекомендуем вам создать отдельную ферму для каждого типа устройств** или просто отдельные группы устройств (даже одного типа), которые вы хотите настроить по-разному.

**************
Регистрация
**************

Чтобы использовать Braiins OS+ Manager, просто `зарегестрируйтесь здесь <https://manager.braiins.com/#/register>`_.

После того, как вы введете свой адрес электронной почты, мы отправим вам письмо с подтверждением. После перехода по ссылке в письме вам будет предложено выбрать пароль и настроить двухфакторную аутентификацию.

***************
Создание фермы
***************

Как только вы войдете в систему, начните с создания фермы:

1. Откройте диалог создания фермы, щелкнув символ «+».
2. Выберите имя, которое вы хотите использовать для своей фермы. Вы можете изменить имя позже.
3. Введите учетные данные для майнинга. Позже вы сможете изменить учетные данные, а также добавить другие пулы.
4. Farm ID для вашей фермы создан.

Farm ID - это строка, которую необходимо установить на устройствах Braiins OS+, которые вы хотите подключить к ферме.

*****************************
Подключите устройства к ферме
*****************************

Чтобы подключить устройство к ферме Braiins OS+ Manager, вам необходимо:

  - чтобы на устройстве стояла Braiins OS+ 21.04 или более новая версия прошивки, 
  - прописанный Farm ID (bos_mgmt_id) на выбранных устройствах.

Эти шаги можно выполнить с помощью BOS Toolbox, выполнив следующие.

**Важная заметка:** Загрузите последнюю версию BOS Toolbox `отсюда <https://braiins.com/os/plus/download>`_, перед использованием команд ниже.

**Установка/Обновление Braiins OS+ и настройка Farm ID**

Если ваши устройства еще не работают на Braiins OS+ 21.04 (или новее), вы можете установить последнюю версию Braiins OS+ и задать Farm ID за один простой шаг, используя команду установки BOS Toolbox с аргументом `--bos-mgmt-id`.

Замените заполнитель «HOSTS» IP-адресом или текстовым файлом, содержащим несколько IP-адресов (по одному на строку, для пакетной установки). Замените «FARM_ID» на свой идентификатор фермы.
   
::

    #Windows
    bos-toolbox.bat install --bos-mgmt-id FARM_ID HOSTS

    #Linux
    ./bos-toolbox install --bos-mgmt-id FARM_ID HOSTS
    
**Set Farm ID on existing Braiins OS+ installation**

If your devices are already running Braiins OS+ 21.04 (or higher), you can set the Farm ID in one simple step by using the BOS Toolbox’s update command with `--bos-mgmt-id` argument.
Replace the “HOSTS” placeholder with an IP address or with a text-file containing multiple IPs (one per line, for batch installation). Replace “FARM_ID” with your Farm ID.

::

    #Windows
    bos-toolbox.bat update --bos-mgmt-id FARM_ID HOSTS

    #Linux
    ./bos-toolbox update --bos-mgmt-id FARM_ID HOSTS

******************
Настройка фермы
******************

**Настройка воркеров**

Существует три различных варианта того, как устройства, включенные в ферму, могут идентифицировать себя в списке устройств от Braiins OS+ Manager и соответственно на стороне пула:

  - На устройство (FARMNAME_IP4) - workername состоит из названия фермы и четвертого сегмента IP-адреса устройства
  - На устройство (FARMNAME_IP3_IP4) - по умолчанию - также включен третий сегмент IP-адреса
  - На устройство (FARMNAME_IP2_IP3_IP4) - также включается второй сегмент IP-адреса
  - Одиночный (FARMNAME) - Все устройства используют одно и то же workername (название фермы). Это означает, что хешрейт агрегируется для одного воркера на стороне пула.

Схема создания workername может быть изменена в любое время.

**Настройка майнинга**

Конфигурация майнинга, доступная на вкладке «Configuration», включает подмножество `конфигурации Braiins OS\+ <https://docs.braiins.com/os/plus-en/Configuration/index_configuration.html>`_, которая доступна на отдельных устройствах. Например, здесь недоступны параметры для отдельных hash chains, поскольку это имеет смысл только с точки зрения отдельного устройства. Помимо этого, присутствуют все важные параметры для настройки тюнинга, целевых температур или динамического масштабирования мощности.
Конфигурация требует, чтобы вы ввели данные как минимум для одного пула (что выполняется в процессе создания фермы). Остальные поля конфигурации необязательны. Если вы не укажете значение, каждое устройство в ферме будет просто использовать значение по умолчанию. Это поведение эквивалентно оставлению конфигурации одного устройства в Braiins OS+ пустой.

После того, как вы нажмете кнопку «Сохранить», новая конфигурация будет распространена на устройства, включенные в ферму, практически сразу - обычно в течение одной секунды.

**Локальные настройки**

Локальные изменения (на майнере) всегда перезаписываются настройками в Braiins OS+ Manager. Если вы хотите получить управление устройством, сначала отключите его от фермы.

******************************
Отключение устройств от фермы
******************************

Если вы хотите отключить устройства от фермы и настроить их индивидуально, вы можете сделать это, просто удалив файл bos_mgmt_id с выбранных устройств. Для нескольких устройств это можно сделать с помощью BOS Toolbox следующим образом:

::

    #Windows
    bos-toolbox.bat command -o HOSTS "rm /etc/bos_mgmt_id && /etc/init.d/bosminer restart"
    
    #Linux
    ./bos-toolbox command -o HOSTS "rm /etc/bos_mgmt_id && /etc/init.d/bosminer restart"

****************
Решение проблем
****************

**1. Проверьте, стоит ли на устройстве Braiins OS+ версии 21.04 или новее**

  - Через GUI: версия отображается в нижнем колонтитуле
  - Через CLI: версия отображается на экране с SSH приветствием 

**Исправление:** если вы используете более старую версию Braiins OS+, сначала обновите свои устройства

**2. Проверьте, правильно ли настроен Farm ID**

Через GUI:

  - перейдите в Status -> Overview -> Miner
  - Проверьте, указан ли правильный идентификатор фермы в строке *BOS Management ID*
  - Если поле отсутствует, на устройстве не настроен Farm ID.

Через CLI:

  - `cat /etc/bos_mgmt_id`
  - эта команда должна вернуть Farm ID

**Исправление**: если ID отсутствует или неверен, попробуйте установить его снова

**3. Перезагрузите ваше устройство**

Все еще не работает? Перезагрузите ваше устройство.

  - Через GUI: System -> Reboot -> Perform Reboot
  - Через CLI: `reboot`

**4. Свяжитесь с нашей службой поддержки**

Если ничего из вышеперечисленного не помогло, `напишите запрос <https://help.slushpool.com/en/support/tickets/new>`_. 

Для эффективного устранения неполадок включите следующую информацию:

  - **Hardware ID** (Status -> Overview)
  - **System Log** (Status -> System Log)
