
.. raw:: html

    <script>
      window.fwSettings={
      'widget_id':77000003511
      };
      !function(){if("function"!=typeof window.FreshworksWidget){var n=function(){n.q.push(arguments)};n.q=[],window.FreshworksWidget=n}}()
    </script>
    <script type='text/javascript' src='https://euc-widget.freshworks.com/widgets/77000003511.js' async defer></script>


.. _manager:

###################
Braiins OS+ Manager
###################

.. contents::
  :local:
  :depth: 1

Braiins OS+ Manager - это cloud платформа, которая позволяет удаленно настраивать устройства для майнинга с прошивкой Braiins OS+, а также постоянно получать данные об их производительности.

.. note::
   Braiins OS+ Manager в настоящее время закрыт для новых регистраций.

Данные отправляются по протоколу Stratum V2 и с использованием того же канала, который используется для сбора платы за разработку (devfee), таким образом, не обременяя вашу сеть другим подключением.

Основным объектом Braiins OS+ Manager является группа устройств под названием Farm (ферма). У каждой фермы есть свой идентификатор - Farm ID. Это строка, которую вы должны прописать на своих устройствах Braiins OS+, если вы хотите подключить их к ферме. После подключения устройства каждые 120 секунд отправляют данные о своей производительности в Braiins OS+ Manager.

У каждой фермы есть своя конфигурация. Когда вы обновляете и сохраняете новую конфигурацию, она будет перенесена на устройство после того, как Manager получит полезные данные о производительности от устройства. Поскольку одна и та же конфигурация применяется ко всем устройствам в ферме, **мы настоятельно рекомендуем вам создать отдельную ферму для каждого типа устройств** или просто отдельные группы устройств (даже одного типа), которые вы хотите настроить по-разному.

*****************************
Подключите устройства к ферме
*****************************

Чтобы подключить устройство к ферме Braiins OS+ Manager, вам необходимо:

  - чтобы на устройстве стояла Braiins OS+ 21.04 или более новая версия прошивки, 
  - прописанный Farm ID (bos_mgmt_id) на выбранных устройствах.

Эти шаги можно выполнить с помощью BOS Toolbox, выполнив следующие.

**Важная заметка:** Загрузите последнюю версию BOS Toolbox `отсюда <https://braiins.com/os/plus/download>`_, перед использованием команд ниже.

**Установка/Обновление Braiins OS+ и настройка Farm ID**

Если ваши устройства еще не работают на Braiins OS+ 21.04 (или новее), вы можете установить последнюю версию Braiins OS+ и задать Farm ID за один простой шаг, используя команду установки BOS Toolbox с опцией Farm-ID (аргументом ``--bos-mgmt-id``).

Если используется версия тулбокса с GUI, заполните опцию **Farm-ID** в разделе **Install** и продолжите установку. Если используется версия тулбокса для командной строки, используйте следующую команду, чтобы задать Farm-ID во время установки. Замените заполнитель **HOSTS** IP-адресом или текстовым файлом, содержащим несколько IP-адресов устройств (по одному на строку, для пакетной установки). Замените **FARM_ID** на свой идентификатор фермы.
   
::

    #Windows
    bos-toolbox.bat install --bos-mgmt-id FARM_ID HOSTS

    #Linux
    ./bos-toolbox install --bos-mgmt-id FARM_ID HOSTS

**Установить Farm ID в существующей установке Braiins OS+**

Если на ваших устройствах уже установлена прошивка Braiins OS+ 21.04 (или выше), вы можете установить Farm ID за один простой шаг, используя команду обновления BOS Toolbox с опцией Farm-ID (аргументом ``--bos-mgmt-id``).
Если используется версия тулбокса с GUI, заполните опцию **Farm-ID** в разделе **Update** и продолжите установку. Если используется версия тулбокса для командной строки, используйте следующую команду, чтобы задать Farm-ID во время установки.
Замените заполнитель**HOSTS** IP-адресом или текстовым файлом, содержащим несколько IP-адресов (по одному на строку, для пакетной установки). Замените **FARM_ID** на свой идентификатор фермы.

::

    #Windows
    bos-toolbox.bat update --bos-mgmt-id FARM_ID HOSTS

    #Linux
    ./bos-toolbox update --bos-mgmt-id FARM_ID HOSTS

******************
Настройка фермы
******************

**Настройка воркеров**

Существует три различных варианта того, как устройства, включенные в ферму, могут идентифицировать себя в списке устройств от Braiins OS+ Manager и соответственно на стороне пула:

  - Одиночный (FARMNAME) - Все устройства используют одно и то же workername (название фермы). Это означает, что хешрейт агрегируется для одного воркера на стороне пула.
  - На устройство (FARMNAMExIP4) - workername состоит из названия фермы и четвертого сегмента IP-адреса устройства
  - На устройство (FARMNAMExIP3xIP4) - по умолчанию - также включен третий сегмент IP-адреса
  - На устройство (FARMNAMExIP2xIP3xIP4) - также включается второй сегмент IP-адреса
  - Для каждого устройства (DEVICE-ID / MANUAL OVERRIDE) - вы можете выбрать желаемое имя воркера для каждого устройства, нажав на шестеренку рядом с ним. По умолчанию в этом режиме в качестве имени воркера используется идентификатор устройства.

Вы также можете изменить разделитель и использовать `_` вместо` x`. Однако обратите внимание, что некоторые пулы не поддерживают символы подчеркивания в имени воркера, и выбор `_` в качестве разделителя может вызвать проблемы с подключением к такому пулу.

Схема создания workername может быть изменена в любое время.

**Настройка майнинга**

Конфигурация майнинга, доступная на вкладке «Configuration», включает подмножество `конфигурации Braiins OS\+ <https://docs.braiins.com/os/plus-en/Configuration/index_configuration.html>`_, которая доступна на отдельных устройствах. Например, здесь недоступны параметры для отдельных hash chains, поскольку это имеет смысл только с точки зрения отдельного устройства. Помимо этого, присутствуют все важные параметры для настройки тюнинга, целевых температур или динамического масштабирования мощности.
Конфигурация требует, чтобы вы ввели данные как минимум для одного пула (что выполняется в процессе создания фермы). Остальные поля конфигурации необязательны. Если вы не укажете значение, каждое устройство в ферме будет просто использовать значение по умолчанию. Это поведение эквивалентно оставлению конфигурации одного устройства в Braiins OS+ пустой.

После того, как вы нажмете кнопку «Сохранить», новая конфигурация будет распространена на устройства, включенные в ферму, практически сразу - обычно в течение одной секунды.

**Локальные настройки**

Локальные изменения (на майнере) всегда перезаписываются настройками в Braiins OS+ Manager. Если вы хотите получить управление устройством, сначала отключите его от фермы.

******************************
Отключение устройств от фермы
******************************

Если вы хотите отключить устройства от фермы и настроить их индивидуально, вы можете сделать это, просто удалив файл bos_mgmt_id с выбранных устройств. Для нескольких устройств это можно сделать с помощью BOS Toolbox следующим образом:

Если используется GUI версия тулбокса, заполните опцию **Command** в разделе **Command** следующим:

::

    rm /etc/bos_mgmt_id && /etc/init.d/bosminer restart

Если используется версия тулбркса для командной строки, используйте следующую команду:

::

    #Windows
    bos-toolbox.bat command -o HOSTS "rm /etc/bos_mgmt_id && /etc/init.d/bosminer restart"
    
    #Linux
    ./bos-toolbox command -o HOSTS "rm /etc/bos_mgmt_id && /etc/init.d/bosminer restart"

****************
Решение проблем
****************

**1. Проверьте, стоит ли на устройстве Braiins OS+ версии 21.04 или новее**

  - Через GUI: версия отображается в нижнем колонтитуле
  - Через CLI: версия отображается на экране с SSH приветствием 

**Исправление:** если вы используете более старую версию Braiins OS+, сначала обновите свои устройства

**2. Проверьте, правильно ли настроен Farm ID**

Через GUI:

  - перейдите в Status -> Overview -> Miner
  - Проверьте, указан ли правильный идентификатор фермы в строке *BOS Management ID*
  - Если поле отсутствует, на устройстве не настроен Farm ID.

Через CLI:

  - `cat /etc/bos_mgmt_id`
  - эта команда должна вернуть Farm ID

**Исправление**: если ID отсутствует или неверен, попробуйте установить его снова

**3. Перезагрузите ваше устройство**

Все еще не работает? Перезагрузите ваше устройство.

  - Через GUI: System -> Reboot -> Perform Reboot
  - Через CLI: `reboot`

**4. Свяжитесь с нашей службой поддержки**

Если ничего из вышеперечисленного не помогло, `напишите запрос <https://help.slushpool.com/en/support/tickets/new>`_. 

Для эффективного устранения неполадок включите следующую информацию:

  - **Hardware ID** (Status -> Overview)
  - **System Log** (Status -> System Log)
