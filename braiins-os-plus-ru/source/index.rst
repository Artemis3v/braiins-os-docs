.. toctree::
   :hidden:
   :maxdepth: 3
   :caption: Table of Contents:
   :glob:

   self
   Setup/index*
   Configuration/index*
   Basic User's Guide/index*
   Development/index*
   Braiins OS+ Manager/index*

---------------

.. raw:: html

    <script>
      window.fwSettings={
      'widget_id':77000003511
      };
      !function(){if("function"!=typeof window.FreshworksWidget){var n=function(){n.q.push(arguments)};n.q=[],window.FreshworksWidget=n}}()
    </script>
    <script type='text/javascript' src='https://euc-widget.freshworks.com/widgets/77000003511.js' async defer></script>

########
Введение
########

Braiins OS + представляет улучшенную операционную систему для ASIC-майнеров. Система построенна на проверенном продукте Braiins OS (https://braiins-os.org/, https://docs.braiins-os.org/), и включает в себя дополнительные проприетарные алгоритмы для автоматической настройки майнеров. Если пользователь ограничит максимально допустимое энергопотребление в ваттах, система автоматически оптимизирует процесс майнинга для максимизации хешрейта. Этот процесс может работать с широким спектром входных данных, что позволяет оптимизировать майнинг для достижения максимально возможной эффективности или максимального хешрейта, исходя из экономических соображений. Внутреннее тестирование подтвердило, что для Antminer S9 можно достичь эффективности 70J/THs или даже выше при низких настройках мощности (Watts). При высоком энергопотреблении хешрейт может увеличиться на 20%+ (в сравнении с Antminer S9, который имеет 13.5 TH/s по умолчанию ~ 94J/TH).

В настоящее время поддерживаются устройства Antminer S9, s9i, S9j, S17, S17 Pro, S17+, T17, T17+, S17e и T17e от Bitmain. Поддержка AAntminer x19 и Whatsminer M20S запланирована на ближайшее время.

**************
Характеристики
**************

 * Передовая оптимизация автонастройки для максимизации скорости хэширования или эффективности
 * Операционная система с открытым исходным кодом
 * Имплементация Stratum V2 с улучшенной эффективностью переноса данных и предотвращением перехвата хэшрейта
 * Замена CGminer (BOSminer) написана с нуля на языке Rust
 * Быстрый запуск (5-7 секунд)
 * Никаких случайных сбоев из-за неопределенного поведения
 * Массовая установка
 * Автоматические обновления со стандартной системой opkg
 * Полностью настраиваемое управление вентилятором (поддержка иммерсионного охлаждения)
 * Расширенный мониторинг для предотвращения перегрева и других проблем
 * Механизм автообновления
 * Динамическое масштабирование мощности, которое снижает предел мощности в случае высоких температур для непрерывного майнинга
 * **Поддержка BTC Tools**

  * Braiins OS+ поддерживается BTC Tools - инструментом для управления партиями майнеров. Поддерживаются новые версии Braiins OS+ - обновите через Toolbox, если вы используете версии ьолее ранние, чем 20.11. Поддерживаются майнеры S9 и x17 с Braiins OS+. BTC Tools для Windows / Linux можно скачать `здесь <https://btccom.zendesk.com/hc/en-us/articles/360020105012>`_. На этой же странице доступна документация по использованию BTC Tools.
  
  * За исключением нижеприведенного, Braiins OS+ поддерживает все функции BTC Tools.
  
  * Ограничения BTC Tools при использовании с Braiins OS+:

    * Настройки в разделе Overclock / Underclock не влияют на Braiins OS+
    * Enhanced LPM включит автонастройку и установит ограничение мощности майнера на 2/3 от предела мощности по умолчанию для майнера.
    * Отключение Enhanced LPM сохраняет автонастройку в последнем состоянии и устанавливает предел мощности майнера равным пределу мощности по умолчанию для майнера (зависит от оборудования)
    * Примечание: параметры LPM и Enhanced LPM используются только при установленном флажке «Power Control». В противном случае сохраняются индивидуальные настройки машины
    * Автонастройка в настоящее время не может быть отключена с помощью BTC Tools, а ограничение мощности не может быть установлено на определенное значение
    * Атрибут оборудования (Hardware attribute) не заполнен
    * В случае, если на майнере настроено несколько групп пулов, в инструменте отображаются только пулы, связанные с первой.

**************************
Служба поддержки и контакт
**************************

Есть вопросы?
Наша команда разработчиков и поддержки всегда готовы помочь.

Присоединяйтесь к нашим группам в Telegram:

  * `EN группа <https://t.me/BraiinsOS>`_
  * `RU группа <https://t.me/BraiinsOS_RU>`_
  * `ZH группа <https://t.me/BraiinsOS_ZH>`_
  
  Вы также можете `отправить VIP-запрос <https://help.slushpool.com/en/support/tickets/new>`_ в нашу службу поддержки.

****************
Журнал изменений
****************

21.12
---------------------------

This is a major release that provides support for Antminer S19J Pro (beta)

* All Mining Hardware

  * [feature] autotune profile is being added to the Get Help files, for better support
  * [feature] immersion mode toggle button added to the web interface
  * [feature] logs are now less verbose, annoying temperature messages have been removed
  * [feature] logs no longer contain color codes as it confuses web log console
  * [feature] log reason for miner shutdown
  * [bug] fixed issue with per-hashboard hashrate showing the total hashrate in the graphs
  * [bug] voltage ramping has been reworked and is now quicker
  * [bug] Bosminer with autotuning off now correctly starts with user defined configuration
  * [bug] Removed logrotate information from syslog

* Antminer X17, X19

  * [feature] support for Antminer S19J Pro (beta)
  * [feature] improved power consumption prediction for Antminer S19J Pro
  * [feature] chip temperature for the X19 models is being estimated based on PCB temperature
  * [feature] removed fan override for the autotuning, default is 100%
  * [bug] fixed an issue with chips not reachable on X19 models

* Known issues:

  * Aftermarket control boards sometimes freeze completely

21.09.3
---------------------------

This is a minor bug fix release for Antminer X19 family

* Antminer family

  * [bug] machine override in bosminer.toml no longer causes the web frontend to block pool settings
  * [feature] EEPROM content is written into system log when autodetection fails for troubleshooting reasons

* Antminer X19

  * [bug] fixed autodetection problem that was confusing some S19Pro for S19 machines
  * [feature] further improve autodetection of S19 machines

21.09.2
---------------------------

This is a miner bug fix release for Antminer X17/X19 family

* Antminer X17, X19

  * [bug] enable tuner configuration for S17Pro machine
  * [bug] fixed power controller lockups

21.09.1
---------------------------

This is a minor release that extends X19 power supply limit for immersion setups.

* Antminer X19

  * [feature] Extend power limit upto 6500 W on APW12. This is for modified PSU's that can handle this power limit!

21.09
---------------------------

Это основной релиз, который представляет собой полный пересмотр веб-интерфейса и улучшенный метод установки с SD-карты.

* Все оборудование для майнинга
  
  * [функция] система, работающая с SD-карты, теперь поддерживает обновление и автоматическое обновление, как в случае системы, работающей с внутренней памяти (NAND).
  * [особенность] BOSminer теперь автоматически приостанавливает майнинг, если нет активного пула, что снижает энергопотребление до минимума.
  * [функция] новый веб-интерфейс с темным режимом и переводами (ранее доступно в ночных сборках)

* Antminer X17

  * [функция] улучшенное ручное переопределение модели, чтобы охватить ситуацию, когда все 3 хэш-панели имеют действующие EEPROM, но контент предназначен для хэш-панелей из другой модели. Типичный сценарий: у вас есть подержаное устройство S17, и предыдущий владелец переписал EEPROM хэш-панели с профилями T17e.

21.06.1
---------------------------

Это выпуск с небольшими исправлениями, улучшающими поддержку Antminer T17e.

* Antminer X17

  * [bug] используйте правильное напряжение инициализации чипа для T17e

21.06
---------------------------

Это крупный релиз, обеспечивающий улучшенную поддержку семейства Antminer X17 (включая "e").

* Antminer X17

  * [функция] улучшенный тюнер обеспечивает оптимальную производительность майнера при настраиваемых пользователем уровнях мощности.
  * [функция] поддержка S17e и T17e
  * [функция] улучшенная поддержка T17, T17+, S17, S17+
  * [функция] поддержка Braiins OS+ Manager включена для всего семейства x17
  * [особенность] Улучшенное динамическое масштабирование мощности - DPS теперь также автоматически увеличивает предел мощности, когда температура майнера по крайней мере на 5 градусов ниже предела HOT, а вентиляторы работают ниже 80%.
  * [особенность] BOSminer будет запускаться и игнорировать неправильные конфигурации только при использовании Braiins OS+ Manager, чтобы конфигурацию можно было исправить. Если Braiins OS+ Manager не используется, BOSminer отключится при неправильной конфигурации.

21.04
---------------------------

This is a major release for Antminer S9 that adds support for Braiins OS+ Manager - a cloud solution for miners management and monitoring.

* All mining hardware types

  * [функция] support for Braiins OS+ Manager - a cloud solution for miner management and monitoring, created in collaboration with FarmGod
  * [функция] BOSminer has now reduced additional network traffic to absolute minimum when probing for alive stratum servers
  * [буг] autotuning is now being enabled automatically when using the SD boot method
  * [буг] BOSminer will run even when the configuration is incorrect to avoid connection loss due to BOSminer being stopped
  * [буг] исправлена проблема с долгим повторным подключением к пулам при изменении публичного IP

21.02
---------------------------

* Все типы оборудования для майнинга

  * [функция] в веб-интерфейсе теперь есть инструмент поддержки Support Tool), который создает архив с логами для отправки нам к изучению
  * [функция] новая панель управления с графическим интерфейсом обеспечивает лучший обзор состояния и производительности майнера на одной компактной странице
  * [функция] toolbox улучшения включают генерирование списка майнеров из discover script и single IP-команды
  * [функция] Образ для SD-карты имеет функцию автоматической установки в NAND, что полностью исключает необходимость использования настольного компьютера для запуска установки с SD

* Antminer X17

  * [функция] майнинг на семействе X17 можно быстро приостановить / возобновить, что подходит для ферм, участвующих в сетевых программах. Например. Команда "пауза" выглядит так: `echo '{"command":"pause"}' | nc IP_ADDRESS 4028`

20.12
---------------------------

* Все типы оборудования для майнинга

  * [буг] ночные сборки теперь будут указывать на nightly feeds
  * [буг] DHCP-сервер на сетевом интерфейсе отключен. Приносим свои извинения за опечатку


* Antminer X17

  * [функция] для майнеров с заблокированной машиной мы теперь предоставляем механизм для настройки образа SD, чтобы он полностью автоматически устанавливал BOS+ в NAND
  * [функция] теперь поддерживаются все модели X17 с флеш-памятью Macronix NAND
  * [функция] Добавлен новый раздел конфигурации [model_detection], который позволяет переопределить результат автоопределения оборудования и учитывать предустановленный тип оборудования в конфигурации. Это сделано для того, чтобы покрыть ситуацию, когда на всех 3 hashboards оврежден EEPROM. См. Параметр конфигурации use_config_fallback
  * [функция] Новая FPGA позволяет разгоняться до 950 МГц (ПРИМЕЧАНИЕ: эти частоты реалистичны только для иммерсионных установок суперохлаждения!)
  * [функция] настройка напряжения была сделана более надежной для поддержки машин, у которых были проблемы с настройкой напряжения в течение указанного тайм-аута

20.11
---------------------------

Это релиз, улучшающий производительность автонастройки и работу серии X17 в целом.

* Все типы оборудования для майнинга

  * [функция] - теперь существует единый BOS Toolbox, который можно использовать для всех типов оборудования. Он также позволяет смешивать модели S9 и X17 в одном файле list.csv, поэтому пользователи могут делать все в пакетном режиме (устанавливать, настраивать, удалять и т.д.), даже с несколькими типами оборудования.

* Antminer X17

  * [функция] частота для всей серии ограничена до 750 MHz
  * [функция] улучшенный тюнинг для всей серии
  * [функция] реализованы обходные пути для хэшбордов, выходящих из строя 
  * [функция] поддержка T17, T17+
  * [буг] улучшенная производительность S17+
  * [буг] исправлена блокировка API при работе тюнера, диаграммы в веб-интерфейсах больше не застревают на пару секунд между перезапусками тюнера

* Antminer S9

  * [функция] - BOS Toolbox теперь единый для Braiins OS и Braiins OS+, а Braiins OS+ используется по умолчанию. Пользователи, которые хотят установить версию с открытым исходным кодом, могут сделать это с параметром --open-source

20.10
---------------------------

Это основной выпуск, который добавляет бета-поддержку Antminer S17+.

* Все типы оборудования для майнинга

  * [функция] procd теперь ожидает до 20 секунд, чтобы разрешить правильное завершение работы BOSminer
  * [функция] Монитор BOSminer теперь вращает вентиляторы только тогда, когда BOSminer был остановлен, чтобы охладить машину
  * [буг] stratum клиент больше не жалуется на 'Stratum: unexpected accepted solution #0'
  * [буг] stratum исправлена ошибка некорректного состояния клиента (т.е. вы не должны видеть "ERRO BUG: 'finish_shutdown_or_recover': unexpected state 'Starting'")
  * [функция] поддержка реферальной программы стала более надежной для поддержки нескольких типов оборудования в одной реферальной конфигурации
  * [функция] Протокол управления BOS теперь ретранслируется между соединениями devfee stratum V2 в случае переключения на резервное соединение

* Antminer S9

  * не было никаких изменений

* Antminer S17

  * [функция] добавлена поддержка S17+
  * [функция] предельные температуры по умолчанию были снижены еще больше до целевой температуры: 72 C, горячей температуры: 85 C, опасной температуры: 92 C, поскольку семейство S17 очень чувствительно к перегреву из-за качества припоя, используемого на платах
  * [функция] мы добавили автоматическое определение варианта платы (C49 против C52) для правильного управления вентиляторами
  * [функция] Braiins OS откажется от установки на машины X17, у которых есть флеш-память Macronix NAND. В настоящее время поддерживается только флэш-память NAND Micron
  * [функция] реализовано автоматическое определение S17, S17Pro, S17+, и для всех этих типов машин существует единый образ
  * [функция] пределы мощности теперь динамически рассчитываются на основе обнаруженной машины

20.09.1
---------------------------

Это выпуск с исправлением ошибок.

* Все типы оборудования для майнинга

  * [особенность] Мы отключили защиту повторного связывания в DNSmasq, чтобы восстановить исходное поведение разрешения имен. 
Это означает, что DNS-сервер майнинг-фермы может обслуживать ответы, указывающие на частные (локальные) диапазоны IP-адресов. 
Это улучшает взаимодействие с пользователем, если у фермы есть локальный прокси-сервер, доступный по имени.

  * [функция] Поддержка optional mining. {ping/pong} stratum-сообщения, которые некоторые пулы используют для проверки работоспособности майнеров.

  * [ошибка] Был развернут обходной путь для еще одной неработающей реализации stratum V1. 
Проблема в том, что некоторые реализации уровня V1 не помечают результат как 'null' в ответ, который содержит ошибку, но помещают в него различные вещи (например, false). 
В таком случае stratum-клиент прервет соединение. Мы превратили это в предупреждающее сообщение журнала, и клиент игнорирует такие аномалии и может извлечь из него полезную нагрузку.

  * [ошибка] версия формата bosminer.toml теперь правильно переносится

* Antminer S17

  * [функция] предел горячей температуры снижен до 100 C

  * [функция отладки] последняя ошибка машины теперь по умолчанию отправляется на наш сервер регистрации. 
Это сделано для упрощения отладки любых проблем с S17. 
Если эта временная функция нежелательна, ее можно отключить в "PROG=/usr/bin/bosminer-panic-wrapper" с "PROG=/usr/bin/bosminer".

20.09
---------------------------

Этот выпуск обеспечивает поддержку Antminer S17 и S17 Pro, а также включает отладочный выпуск для всех Antminer S9.

* Все типы оборудования для майнинга
  
  * [функция] реализована реферальная программа - продавцы Braiins OS+ теперь могут получить реферальный пакет (с идентификатором реферала и файлом конфигурации), который отправит им часть dev fee.

* Known issues
  
  * [проблема] отображаемое энергопотребление для S17 и S17 Pro ниже фактического энергопотребления, оно будет улучшено в следующих выпусках.
  * [проблема] BOSminer переподключается к пулу медленно, когда интернет-провайдер меняет IP-адрес пользователя.

20.06
---------------------------

Этот выпуск направлен на улучшение удобства и простоты использования Braiins OS+ и BOS Toolbox путем внедрения новых функций и устранения наиболее важных проблем.

  * Все типы оборудования для майнинга

    * [обходное решение] Поддержка пулов на основе yiimp (например, prohashing), которые неправильно отправляют скользящую маску версии, начинающуюся с '0x', которая не соответствует спецификации BIP-310
    * [функция] Поддержка stratum V1, так как он используются некоторыми пулами для переключения алгоритмов и других хаков
    * [функция] Реализация механизма автообновления. Машинка будет периодически проверять наличие новой версии Braiins OS и обновляться до нее автоматически при обнаружении. Эта функция включена по умолчанию при переключении со стоковой прошивки, но ее необходимо включить вручную при обновлении со старой версии Braiins OS.
    * [функция] Улучшено ведение журнала системы с помощью logrotate. Системные журналы теперь автоматически сжимаются и сохраняются в NAND устройства, что позволяет хранить более длинные журналы
    * [функция] Обновлен BOS Toolbox, который теперь может запускать пользовательские команды в пакетном режиме
    * [буг] Установка NAND с SD-карты теперь корректно переносит конфигурацию с SD-карты, а не из старой системы на NAND
    * [буг] Исправлена проблема с пустым *bosminer.toml*, когда майнер выключен до того, как система очистит буфер
    * [буг] Кнопка отчета IP теперь работает правильно
    * [функция] Подсистема автонастройки теперь сохраняет профили производительности в /etc/bosminer-autotune.json. Профили производительности записываются для каждого уровня мощности и индекса платы
    * [функция] Динамическое масштабирование мощности теперь автоматически снижает предел мощности майнера на заданную пользователем величину, если устройство достигает значения *Горячая температура*. По достижении минимального предела мощности, майнер отключается, чтобы остыть. Майнер снова начинает работать на исходном пределе мощности после заданного пользователем периода времени

  * Antminer S9

    * [функция] Мы вернулись к IP-ядру Xilinx I2C для связи с контроллерами напряжения и расширили его фильтрацией помех для шумной среды.
    * [функция] Линия UART Rx для связи с чипами хэширования была расширена с помощью глит-фильтрации


20.04
---------------------------

Этот выпуск охватывает в основном проблемы, с которыми сталкиваются пользователи, трудности установки/удаления и 1 серьезную проблему с контроллером I2C на S9. Кроме того, теперь у нас есть ночные сборки, которые легко включить с помощью **bos** tool.

  * Все типы оборудования для майнинга

    * [функция] поддержка переподключения - мы реализовали поддержку `client.reconnect` (stratum V1) и переподключение сообщения для V2
    * [функция] установка/удаление (иначе **upgrade2bos** или **restore2factory**) улучшен процесс (переход с заводской прошивки на Braiins OS или наоборот):
    * [функция] собственный пользователь пула (`--pool-user`) может быть установлен в командной строке
    * [функция] настройки пула из заводской прошивки теперь автоматически переносятся в конфигурацию BOSminer. Миграцию можно отключить, указав (`--no-keep-pools`)
    * [функция] Теперь мы предоставляем двоичную форму **upgrade2bos** (основанный на pyinstaller) содержит последний установочный образ Braiins OS
    * [функция] аналогично, **restore2factory** (основанный на pyinstaller) теперь доступен в двоичной форме и больше не требует загрузки/поиска правильной заводской прошивки.
    * [функция] Дисковое пространство и длительное резервное копирование оригинальной прошивки теперь отключено по умолчанию (может быть включено `--backup`)
    * [функция] сохранение имени хоста при первоначальной установке теперь осуществляется двумя способами `--keep-hostname` и `--no-keep-hostname`, позволяя принудительно переопределить и автоматически генерировать имя хоста на основе MAC-адреса
    * [функция] поддержка включения / отключения ночных сборок была интегрирована в **bos** utility (и ее последователя **miner**).
    * [функция] система теперь обеспечивает **logs** покрытие **longer timespan** **BOSminer** операции благодаря включению **log rotation** и сжатия '/var/log/syslog.old', если больше чем 32 KiB
    * [буг] изображение на SD-карте теперь содержит открытый ключ авторизации в пуле, который отсутствовал
    * [буг] процент отказов теперь корректно отображается
    * [буг] неизвестные сообщения stratum  V1, полученные от сервера, теперь регистрируются для диагностики

  * Antminer S9
  
    * [функция] Состояние автонастройки теперь отображается в графическом интерфейсе. Добавлена команда API TUNERSTATUS.
    * [буг] некоторые устройства испытывали случайные блокировки контроллера I2C и не могли обмениваться данными с контроллерами питания хэш-панели, подключенными к общей I2C. Мы обнаружили, что причиной было ядро контроллера Xilinx I2C, которое мы интегрировали в поток битов FPGA . Мы переключились на I2C, присутствующий в SoC, и поток битов только направляет сигнал периферийного устройства (IIC0) на соответствующие выводы FPGA.

20.03
---------------------------

  * Все типы оборудования для майнинга

    * [функция] файл конфигурации позволяет указать предел мощности блока питания, который будет учитываться алгоритмом автонастройки, 
     чтобы максимизировать TH/W, производимое майнинговым устройством.

  * Antminer S9

  * [функция] Автонастройка на основе указанного пользователем предела мощности

****************
Известные ошибки
****************

Ниже перечислены проблемы, которые, как известно, присутствуют в выпущенной версии.

20.03 (обновлено 30.03.2020)
------------------------------

  * GUI

  * Ссылочная линия на графике хэшрейта имеет неверное значение для среднего номинального хэшрейта. Ошибка
 присутствует только тогда, когда работают менее 3 цепочек хешей.
 * Коэффициент отклонения умножается на 100. Например, когда коэффициент отклонения составляет 0,1%, тогда отображается
 10%.

  * Конфигурация

  * При установке SD-карты появится сообщение об отсутствии ключа аутентификации Stratum V2 в Miner/Configuration.
раздел (Error: missing upstream authority key for securing stratum2+tcp connection in pool).
Пользователь может настроить соединение (включая ключ) в конфигурации или непосредственно в файл ``/etc/bosminer.toml``.

