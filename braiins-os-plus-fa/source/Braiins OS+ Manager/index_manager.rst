
.. _manager:

###################
Braiins OS+ Manager
###################

.. contents::
  :local:
  :depth: 1

Braiins OS+ Manager یک پلت فرم ابری است که به شما امکان می دهد از راه دور دستگاه های استخراج خود را که از فریم‌ور Braiins OS+ استفاده می کنند پیکربندی کنید و همچنین داده های مربوط به عملکرد آنها را به طور مداوم مانیتور کنید.

داده‌ها از طریق پروتکل Stratum V2 ارسال می‌گردند و از همان کانالی استفاده میگردد که برای جمع‌آوری داده‌های کارمزد توسعه استفاده می‌گردد، بنابراین اتصال دیگری روی شبکه شما بار نمی‌آورد. 

موضوع اصلی در Braiins OS+ Manager گروهی از دستگاه‌ها به نام Farm است. هر فارم یک ‌‌Farm ID مختص خود را دارد. این شناسه ای است که اگر می خواهید دستگاه‌ها را به مزرعه متصل کنید باید روی دستگاههای Braiins OS+ خود تنظیم کنید. دستگاه‌ها پس از اتصال هر 120 ثانیه اطلاعات عملکرد خود را به Braiins OS+ Manager ارسال می کنند.

هر فارم تنظیمات و پیکربندی مرتبط با خود را دارد. هنگامی که پیکربندی جدید را بروزرسانی و ذخیره می‌کنید، به محض دریافت داده‌های عملکرد دستگاه پیکربندی جدید برای دستگاه ارسال خواهد شد. از آنجا که این تنظیمات به صورت یکسان برای همه دستگاههای Farm اعمال می شود، **ما اکیداً توصیه می کنیم که برای هر نوع (مدل) دستگاه یک فارم جداگانه ایجاد کنید** یا حتی اگر گروهی از دستگاهها (حتی با مدل یکسان) را که می خواهید متفاوت تنظیم کنید را در فارم‌های متفاوت مدیریت کنید.

*******
ثبت نام
*******

برای استفاده از Braiins OS+ Manager، به سادگی از `اینجا ثبت‌نام کنید <https://manager.braiins.com/#/register>`_ 

پس از وارد کردن آدرس پست الکترونیکی خود، ما ایمیل تأیید را برای شما ارسال خواهیم کرد. پس از دنبال کردن پیوند در ایمیل، از شما خواسته می شود رمز ورود خود را انتخاب کرده و احراز هویت دو مرحله‌ای را تنظیم کنید.

*************
ایجاد یک فارم
*************

پس از ورود به سیستم، با ایجاد Farm شروع کنید:

1. پنجره ایجاد Farm را با کلیک روی نماد "+" باز کنید.
2. یک نام دلخواه برای نام Farm خود انتخاب کنید. شما در آینده نیز می‌توانید این اسم را تغییر دهید.
3. اطلاعات ماینینگ خود مانند استخر‌ها و ورکر را ثبت کنید. شما بعدا نیز قادر به تغییر این اطلاعات و اضافه کردن آدرس استخرهای بیشتر خواهید بود.
4. شناسه Farm ID برای Farm شما ایجاد خواهد شد.

شناسه Farm ID یک کدی متنی است که شما باید در دستگاه‌هایی که فریم‌ور Braiins OS+ را دارند و تمایل به اتصال آنها به فارم را دارید، تنظیم کنید.

****************************
متصل کردن یک دستگاه به Farm
****************************

برای متصل کردن یک دستگاه به فارمی در Braiins OS+ Manager، لازم است تا شما:

  - نسخه فریم Braiins OS+ 21.04 یا بالاتر را در دستگاه‌های مورد نظر خود داشته باشید.
  - شناسه Farm ID (bos_mgmt_id) را در بخش تنظیمات BOSminer دستگاه‌های مورد نظر تنظیم کنید.

تمامی این مراحل با BOS Toolbox قابل انجام هستند.
**نکته مهم:** آخرین نسخه BOS Toolbox را ‍‍‍‍`از اینجا <https://braiins.com/os/plus/download>`_ قبل از اجرای دستورات زیر دانلود کنید.

**نصب/بروز رسانی Braiin OS+ و تنظم شناسه Farm ID**

اگر دستگاه‌های شما هنوز از فریم‌ور Braiins OS+ نسخه ۲۱/۰۴ (یا نسخه Nightly) بهره نمی‌برند، شما می‌توانید نصب آخرین نسخه فریم‌ور Braiins OS+ و تنظیم شناسه Farm ID را در یک گام ساده با استفاده از BOS Toolbox و دستور install و گزینه Farm-ID انجام دهید (پارامتر ``--bos-mgmt-id`` ‍‍‍).

اگر از نسخه گرافیکی تولباکس استفاده می‌کنید، گزینه شناسه **Farm-ID** را در بخش نصب **Install** وارد نمایید و عملیات نصب را انجام دهید. اگر از نسخه خط فرمان تولباکس استفاده می‌کنید، از دستورات ذیل استفاده کنید و شناسه Farm ID را در دستور وارد نمایید. عبارت “HOSTS” را با آدرس آی پی دستگاه خود یا با فایل متنی شامل تمامی آی پی های مورد نظر خود(هر کدام در یک سطر برای نصب دسته‌ای) جایگزین کنید. همچنین “FARM_ID” را به شناسه Farm ID خود تغییر دهید.

::

    #Windows
    bos-toolbox.bat install --bos-mgmt-id FARM_ID HOSTS

    #Linux
    ./bos-toolbox install --bos-mgmt-id FARM_ID HOSTS

**تنظیم شناسه‌ Farm ID روی Braiins OS+ موجود**

اگر دستگاه شما در حال حاضر از نسخه ۲۱/۰۴ (یا بالاتر) Braiins OS+ استفاده می‌کند، شما می‌توانید تنظیم شناسه Farm ID را در یک گام ساده با استفاده از BOS Toolbox و دستور update و گزینه Farm-ID انجام دهید (پارامتر ``--bos-mgmt-id`` ‍‍‍).

اگر از نسخه گرافیکی تولباکس استفاده می‌کنید، گزینه شناسه **Farm-ID** را در بخش نصب **Install** وارد نمایید و عملیات نصب را انجام دهید. اگر از نسخه خط فرمان تولباکس استفاده می‌کنید، از دستورات ذیل استفاده کنید و شناسه Farm ID را در دستور وارد نمایید. عبارت “HOSTS” را با آدرس آی پی دستگاه خود یا با فایل متنی شامل تمامی آی پی های مورد نظر خود(هر کدام در یک سطر برای نصب دسته‌ای) جایگزین کنید. همچنین “FARM_ID” را به شناسه Farm ID خود تغییر دهید.

::

    #Windows
    bos-toolbox.bat update --bos-mgmt-id FARM_ID HOSTS

    #Linux
    ./bos-toolbox update --bos-mgmt-id FARM_ID HOSTS

******************
نحوه تنظیم یک فارم
******************

**تنظیمات Workername**

There are three different options on how the devices included in a Farm can identify themselves in the Manager device list and on the pool side:
سه روش مختلف 

  - تکی (FARMNAME) - تمامی دستگاه‌ها از یک نام ورکر (که همان نام فارم است) استفاده می کنند. این بدین معنی است که تمامی هش‌ریت شما در یک ورکر در استخر جمع میگردد و نمایش داده میشود.
  - به ازای هر دستگاه (FARMNAMExIP4) - نام‌ورکر متشکل از نام فارم و بخش چهارم آی‌پی دستگاه است
  - به ازای هر دستگاه (FARMNAMExIP3xIP4) - نام‌ورکر متشکل از نام فارم و بخش سوم و چهارم آی‌پی دستگاه است
  - به ازای هر دستگاه (FARMNAMExIP2xIP3xIP4) - نام‌ورکر متشکل از نام فارم و بخش دوم و بخش سوم و چهارم آی‌پی دستگاه است
  - به ازای هر دستگاه (DEVICE-ID / نام دلخواه) - شما میتوانید نام ورکر انتخابی و دلخواه خود را برای هریک از دستگاه‌ها با کلیک روی آیکون چرخنده در لیست ماینرها درج کنید. به طور پیشفرض Device ID به عنوان نام ورکر در این حالت به عنوان نام‌ورکر درج میگردد.

همچنین شما میتوانید از ‍`_` به جای ‍`x` به عنوان جداکننده استفاده کنید، لطفا توجه فرمایید که برخی استخرها از زیرخط برای نام‌ورکر پشتیبانی نمی‌کنند و استفاده از `_` ممکن است باعث ایجاد مشکل در ارتباط با آن استخر‌ها گردد.

در هر زمان دلخواه می توانید حالت نام گذاری ورکر را تغییر دهید.

**تنظیمات ماینینگ**

تمامی تنظیمات ماینینگ که در صفحه تنظیمات ` Braiins OS\+ configuration <https://docs.braiins.com/os/plus-en/Configuration/index_configuration.html>`_ جزو تنظیمات عمومی هستند در اینجا نیز قابل دسترس میباشد. برای مثال،‌ در این بخش امکان تنظیم جداگانه هش‌بوردها نیست از آنجایی که باید برای آنها تک تک تنظیمات انجام داد،‌به غیر از این مورد تمامی تنظیمات مهم شامل تنظیمات اتوتیونینگ،‌تنظیمات دما و امکان مقیاس پذیری دینامیک توان در دسترس است.

بخش تنظیمات نیاز دارد تا شما حداقل یک آدرس استخر (که زمان ایجاد فارم انجام داده اید) را وارد نمایید. بقیه تنظیمات اختیاری هستند. اگر شما هیچ مقداری را تنظیم نکنید،‌هر دستگاهی که در فارم اضافه میشود از تنظیمات پیشفرض استفاده خواهد کرد، این حالت همانند وقتی است که شما تنظیمات را در Braiin OS+ انجام نمی دهید. 

پس از کلیک روی دکمه Save،‌ تنظیمات جدید بلافاصله به تمامی دستگاه هایی که در فارم اضافه کردید ارسال می‌شود. - معمولا در عرض یک ثانیه

**تغییرات دستی روی ماینر**

تغییرات دستی روی ماینر همیشه توسط Manager بازنویسی خواهند شد. اگر شما تمایل دارید تا دستی تنظیمات دیگری روی ماینر اعمال کنید باید ارتباط ماینر را از فارم ایجاد شده در Manager قطع کنید.

******************************
روش قطع کردن ماینر از فارم
******************************

اگر شما تمایل دارید تا دستگاه‌های خود را از فارم جدا کنید و به صورت جداگانه تنظیم نمایید،‌ می‌توانید به سادگی با حذف فایل bos_mgmt_id در دستگاه‌های مورد نظر این کار را انجام دهید، برای انجام توسط تولباکس مراحل زیر را طی کنید:

اگر از نسخه گرافیکی تولباکس استفاده می‌کنید، گزینه دستور یا همان **Commmand** را با دستور **Command** ذیل پر نمایید:

::

    rm /etc/bos_mgmt_id && /etc/init.d/bosminer restart

اگر از نسخه خط فرمان تولباکس استفاده میکنید از دستور زیر استفاده نمایید:

::

    #Windows
    bos-toolbox.bat command -o HOSTS "rm /etc/bos_mgmt_id && /etc/init.d/bosminer restart"
    
    #Linux
    ./bos-toolbox command -o HOSTS "rm /etc/bos_mgmt_id && /etc/init.d/bosminer restart"

***************
ایرادیابی
***************

**1. دستگاه را بررسی کنید تا فریم‌ور Braiins OS+ 21.04 یا جدیدتر را داشته باشد**

  - از طریق رابط کاربری وب: نسخه فریم‌ور در پایین صفحه بخش فوتر قابل مشاهده است
  - از طریق خط فرمان: نسخه فریم‌ور در صفحه خوش آمدگویی SSH قابل مشاهده است.

**راه‌حل:** اگر شما از نسخه قدیمی‌تر Braiins OS+ استفاده می‌کنید ابتدا باید فریم‌ور بروزرسانی کنید.

**2. بررسی کنید تا شناسه Farm ID به درستی تنظیم شده باشد**

از طریق رابط کاربری وب:

  - به منوی Status -> Overview -> Miner بروید
  - بررسی کنید تا شناسه Farm ID  به درستی در فیلد *BOS Management ID* درج شده باشد.
  - اگر فیلدی آنجا نبود یعنی هیچ Farm ID در دستگاه تنظیم نشده است.

از طریق خط فرمان CLI:

  - `cat /etc/bos_mgmt_id`
  - دستور بالا باید شناسه Farm ID را در پاسخ نمایش دهد

**راه‌حل**: اگر شناسه تنظیم نشده بود یا به اشتباه درج شده بود،‌تلاش کنید تا دوباره تنظیم کنید

**3. دستگاه را ریبوت کنید**

همچنان کار نمی‌کند؟ دستگاه را ریبوت کنید..

  - از طریق رابط کاربری وب: System -> Reboot -> کلیک Reboot
  - از طریق خط فرمان CLI: اجرای دستور `reboot`

**4. با تیم پشتیبانی تماس بگیرید**

اگر هیچکدام از روش‌های بالا کارساز نبود، `یک تیکت پشتیبانی ثبت کنید <https://help.slushpool.com/en/support/tickets/new>`_. 

برای ایرادیابی بهتر و رفع سریعتر آن اطلاعات زیر را در تیکت ثبت کنید:

  - **Hardware ID** (Status -> Overview)
  - **System Log** (Status -> System Log)
